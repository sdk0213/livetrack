<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RunCheer - í¬ë£¨ ì‘ì› ğŸƒâ€â™‚ï¸ğŸ’¨</title>
  <link rel="icon" href="/RunCheer.png" type="image/png" />
  <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.4/kakao.min.js" integrity="sha384-DKYJZ8NLiK8MN4/C5P2dtSmLQ4KwPaoqAfyA/DfmEc1VDxu4yyC7wy6K1Hs90nka" crossorigin="anonymous"></script>
  <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=04ebpnqto6"></script>
  <style>
    :root{
      --bg:#f5f7fa;
      --card:#ffffff;
      --muted:#64748b;
      --fg:#1e293b;
      --acc:#3b82f6;
      --ok:#22c55e;
      --err:#ef4444;
      --warn:#f59e0b;
      --finished:#dbeafe;
      --kakao:#FEE500;
    }
    
    * { box-sizing: border-box; }
    
    html,body{
      margin:0;
      height:100%;
      background:var(--bg);
      color:var(--fg);
      font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,Helvetica,Arial,sans-serif;
      scroll-behavior:smooth;
    }
    
    .wrap{max-width:1100px;margin:22px auto;padding:0 16px;padding-bottom:80px}
    
    h1{margin:0 0 6px;font-size:20px}
    h2{margin:0 0 12px;font-size:18px;font-weight:700}
    h3{margin:0 0 10px;font-size:16px;font-weight:700}
    
    .muted{color:var(--muted)}
    
    .card{
      background:var(--card);
      border-radius:14px;
      box-shadow:0 2px 8px rgba(0,0,0,.1);
      padding:14px;
      margin:12px 0;
    }
    
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .col{flex:1 1 240px}
    
    input,textarea,select,button{
      width:100%;
      box-sizing:border-box;
      background:#f8fafc;
      border:1px solid #cbd5e1;
      color:var(--fg);
      border-radius:10px;
      padding:10px;
      font-size:14px;
    }
    
    button{
      cursor:pointer;
      background:linear-gradient(180deg,#3b82f6,#2563eb);
      border:none;
      color:#fff;
      font-weight:600;
      transition:opacity 0.2s;
    }
    
    button:hover:not(:disabled){opacity:0.9}
    button:disabled{opacity:.5;cursor:not-allowed}
    
    button.secondary{background:#f8fafc;border:1px solid #cbd5e1;color:var(--fg)}
    button.success{background:linear-gradient(180deg,#22c55e,#16a34a)}
    button.danger{background:linear-gradient(180deg,#ef4444,#dc2626)}
    button.kakao{background:var(--kakao);color:#000;font-weight:700}
    
    .btn-small{padding:6px 12px;font-size:12px;width:auto}
    
    /* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
    .tab-nav{
      position:fixed;
      bottom:0;
      left:0;
      right:0;
      background:#fff;
      border-top:1px solid #e2e8f0;
      display:flex;
      z-index:100;
      box-shadow:0 -2px 10px rgba(0,0,0,.1);
    }
    
    .tab-btn{
      flex:1;
      padding:12px;
      background:transparent;
      border:none;
      border-radius:0;
      color:var(--muted);
      font-size:12px;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:4px;
    }
    
    .tab-btn.active{color:var(--acc);font-weight:700}
    .tab-btn .icon{font-size:20px}
    
    /* í˜ì´ì§€ */
    .page{display:none}
    .page.active{display:block}
    
    /* ë¡œê·¸ì¸ í™”ë©´ */
    .login-container{
      min-height:80vh;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      text-align:center;
    }
    
    .login-logo{
      width:120px;
      height:120px;
      margin-bottom:16px;
      border-radius:24px;
      overflow:hidden;
      box-shadow:0 4px 12px rgba(0,0,0,.15);
    }
    .login-logo img{
      width:100%;
      height:100%;
      object-fit:cover;
    }
    .login-title{font-size:24px;font-weight:700;margin-bottom:8px}
    .login-subtitle{color:var(--muted);margin-bottom:32px}
    
    /* ê·¸ë£¹ ì¹´ë“œ */
    .group-card{
      background:#f8fafc;
      border:1px solid #e2e8f0;
      border-radius:10px;
      padding:12px;
      margin:8px 0;
    }
    
    .group-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
    .group-name{font-weight:700;font-size:16px}
    .group-code{font-size:12px;color:var(--muted);font-family:monospace}
    
    /* ì£¼ì ë¦¬ìŠ¤íŠ¸ */
    .runner-list{display:flex;flex-direction:column;gap:10px}
    
    .runner-card{
      display:flex;
      gap:12px;
      align-items:center;
      background:#f8fafc;
      border:1px solid #e2e8f0;
      border-radius:10px;
      padding:10px;
    }
    
    .runner-photo{
      width:60px;
      height:60px;
      border-radius:8px;
      object-fit:cover;
      background:#e2e8f0;
    }
    
    .runner-info{flex:1}
    .runner-name{font-weight:700;margin-bottom:4px}
    .runner-bib{font-size:12px;color:var(--muted)}
    
    /* ëª¨ë‹¬ */
    .modal{
      display:none;
      position:fixed;
      top:0;
      left:0;
      right:0;
      bottom:0;
      background:rgba(0,0,0,0.5);
      z-index:200;
      align-items:center;
      justify-content:center;
      padding:20px;
    }
    
    .modal.active{display:flex}
    
    .modal-content{
      background:#fff;
      border-radius:14px;
      padding:20px;
      max-width:500px;
      width:100%;
      max-height:80vh;
      overflow-y:auto;
    }
    
    .modal-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:16px;
    }
    
    .modal-close{
      background:transparent;
      border:none;
      font-size:24px;
      cursor:pointer;
      padding:0;
      width:auto;
      color:var(--muted);
    }
    
    /* ì§€ë„ */
    #map{width:100%;height:400px;border-radius:10px;background:#e2e8f0}
    
    /* í…Œì´ë¸” */
    table{width:100%;border-collapse:separate;border-spacing:0 8px;font-size:12px}
    th,td{text-align:left;padding:10px 12px;vertical-align:top}
    th{font-size:11px;color:var(--muted);font-weight:600}
    tbody tr{background:#f8fafc;border-radius:10px}
    tbody tr.finished{background:var(--finished)}
    
    /* ì´ë¯¸ì§€ ì—…ë¡œë“œ */
    .image-upload-area{
      border:2px dashed #cbd5e1;
      border-radius:10px;
      padding:20px;
      text-align:center;
      cursor:pointer;
      transition:all 0.2s;
    }
    
    .image-upload-area:hover{border-color:var(--acc);background:#f8fafc}
    .image-upload-area.has-image{border-style:solid;border-color:var(--ok)}
    
    .image-preview{
      max-width:200px;
      max-height:200px;
      border-radius:8px;
      margin:10px auto;
    }
    
    .loading{
      display:inline-block;
      width:14px;
      height:14px;
      border:2px solid #cbd5e1;
      border-top-color:var(--acc);
      border-radius:50%;
      animation:spin 0.6s linear infinite;
      vertical-align:middle;
      margin-left:8px;
    }
    
    @keyframes spin{to{transform:rotate(360deg)}}
    
    .hidden{display:none!important}
    
    .text-center{text-align:center}
    .mt-2{margin-top:16px}
    .mb-2{margin-bottom:16px}
  </style>
</head>
<body>
  <div id="app">
    <!-- ë¡œê·¸ì¸ ì „ í™”ë©´ -->
    <div id="loginPage" class="page active">
      <div class="wrap">
        <div class="login-container">
          <div class="login-logo">
            <img src="/RunCheer.png" alt="RunCheer Logo">
          </div>
          <h1 class="login-title">RunCheer</h1>
          <p class="login-subtitle">í•¨ê»˜ ì‘ì›í•˜ëŠ” ë§ˆë¼í†¤ í¬ë£¨</p>
          <button id="kakaoLoginBtn" class="kakao" style="max-width:300px">
            <span style="font-size:18px">ğŸ’¬</span> ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ì‹œì‘í•˜ê¸°
          </button>
        </div>
      </div>
    </div>

    <!-- ë¡œê·¸ì¸ ì¤‘ ë¡œë”© í™”ë©´ -->
    <div id="loadingPage" class="page">
      <div class="wrap">
        <div class="login-container">
          <div class="login-logo">
            <img src="/RunCheer.png" alt="RunCheer Logo">
          </div>
          <h1 class="login-title">ë¡œê·¸ì¸ ì¤‘...</h1>
          <p class="login-subtitle">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”</p>
          <div style="text-align:center;margin-top:20px">
            <div style="display:inline-block;width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #3b82f6;border-radius:50%;animation:spin 1s linear infinite"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- ë©”ì¸ ì•± (ë¡œê·¸ì¸ í›„) -->
    <div id="mainApp" class="page">
      <!-- ì‘ì› íƒ­ -->
      <div id="cheerPage" class="page active">
        <div class="wrap">
          <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px;">
            <div>
              <h1 style="margin:0 0 4px 0;">RunCheer Beta <span style="font-size:12px;color:#94a3b8;font-weight:400;">(v0.0.0.1)</span></h1>
              <p style="margin:0;font-size:14px;color:#64748b;">ëŸ¬ë„ˆë¥¼ ì‘ì›í•˜ì! ğŸƒâ€â™‚ï¸ğŸ’¨</p>
            </div>
            <div style="text-align:right;">
              <div style="font-size:11px;color:#94a3b8;">ê°œë°œì</div>
              <div style="font-size:13px;font-weight:600;color:#475569;">ì„±ëŒ€ê²½</div>
            </div>
          </div>
          
          <!-- ê·¸ë£¹ ì •ë³´ -->
          <div class="card">
            <div id="noGroupMessage">
              <p class="text-center muted">ê°€ì…ëœ ê·¸ë£¹ì´ ì—†ìŠµë‹ˆë‹¤.</p>
              <button id="createGroupBtn" class="success">â• ìƒˆ ê·¸ë£¹ ë§Œë“¤ê¸°</button>
              <button id="joinGroupBtn" class="secondary mt-2">ğŸ”— ê·¸ë£¹ ì½”ë“œë¡œ ì°¸ì—¬í•˜ê¸°</button>
            </div>
            
            <div id="groupInfo" class="hidden">
              <div class="group-header">
                <div>
                  <div class="group-name" id="groupName"></div>
                  <div class="group-code" id="groupCode"></div>
                </div>
                <button id="startTrackingBtn" class="success btn-small">ğŸ¯ ê·¸ë£¹ ì¶”ì  ì‹œì‘</button>
              </div>
              <div class="muted" style="font-size:12px" id="groupEvent"></div>
            </div>
          </div>

          <!-- ì£¼ì ëª©ë¡ -->
          <div class="card" id="runnersSection" class="hidden">
            <h3>ğŸ‘¥ ìš°ë¦¬ í¬ë£¨ ì£¼ì</h3>
            <div id="runnersList" class="runner-list"></div>
          </div>

          <!-- ì§€ë„ -->
          <div class="card" id="mapSection" class="hidden">
            <h3>ğŸ“ ì‹¤ì‹œê°„ ì£¼ì ìœ„ì¹˜ <span style="font-size:11px;color:#666;font-weight:normal">(15ì´ˆ ê°„ê²© ìœ„ì¹˜ ê°±ì‹ )</span></h3>
            <div style="color:var(--err);font-size:12px;margin-bottom:10px;font-weight:600">âš ï¸ ë™ì‘í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¯¸ë™ì‘ ì‹œ ì•„ë˜ í…Œì´ë¸”ì—ì„œ ë§ˆì§€ë§‰ ìœ„ì¹˜ë¥¼ ì§ì ‘ í™•ì¸í•´ì£¼ì„¸ìš”.</div>
            <div style="color:#666;font-size:12px;margin-bottom:10px">
              â„¹ï¸ ì£¼ìì˜ ì˜ˆìƒ ìœ„ì¹˜ëŠ” ì´ì „ êµ¬ê°„ì˜ í˜ì´ìŠ¤ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì‚°ì •ë©ë‹ˆë‹¤<br>
              â„¹ï¸ ì²˜ìŒ ì¶œë°œì‹œì—ëŠ” 6:30 í˜ì´ìŠ¤ë¡œ ì˜ˆì¸¡ë˜ì–´ ì‚°ì •ë©ë‹ˆë‹¤
            </div>
            <div id="map"></div>
          </div>

          <!-- ê²°ê³¼ í…Œì´ë¸” -->
          <div class="card" id="resultsSection" class="hidden">
            <div id="status" class="muted" style="font-size:12px"></div>
            <table>
              <thead>
                <tr>
                  <th>ì£¼ì</th>
                  <th>ìƒíƒœ</th>
                  <th>ê±°ë¦¬</th>
                  <th>ìœ„ì¹˜</th>
                </tr>
              </thead>
              <tbody id="resultsBody"></tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- í”„ë¡œí•„ íƒ­ -->
      <div id="profilePage" class="page">
        <div class="wrap">
          <h1>ğŸ‘¤ í”„ë¡œí•„</h1>
          
          <div class="card">
            <h3>ë‚´ ì •ë³´</h3>
            <div style="text-align:center;margin:12px 0">
              <img id="profileImage" src="" alt="í”„ë¡œí•„" style="width:80px;height:80px;border-radius:50%;object-fit:cover;border:2px solid var(--acc)" />
            </div>
            <div style="margin:12px 0">
              <label class="muted" style="font-size:12px">ì´ë¦„</label>
              <input type="text" id="profileName" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" />
            </div>
            <button id="updateNameBtn" class="success">ì´ë¦„ ë³€ê²½</button>
          </div>

          <div class="card">
            <h3>ê°€ì…ëœ ê·¸ë£¹</h3>
            <div id="myGroupInfo">
              <p class="muted text-center">ê°€ì…ëœ ê·¸ë£¹ì´ ì—†ìŠµë‹ˆë‹¤.</p>
            </div>
            <button id="leaveGroupBtn" class="danger mt-2 hidden">ê·¸ë£¹ íƒˆí‡´</button>
          </div>

          <div class="card">
            <button id="privacyBtn" class="secondary">ğŸ“‹ ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</button>
            <button id="deleteAccountBtn" class="danger mt-2">ğŸ—‘ï¸ íšŒì› íƒˆí‡´</button>
            <button id="logoutBtn" class="secondary mt-2">ğŸšª ë¡œê·¸ì•„ì›ƒ</button>
          </div>
        </div>
      </div>

      <!-- í•˜ë‹¨ íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
      <nav class="tab-nav">
        <button class="tab-btn active" data-tab="cheer">
          <span class="icon">ğŸ‰</span>
          <span>ì‘ì›</span>
        </button>
        <button class="tab-btn" data-tab="profile">
          <span class="icon">ğŸ‘¤</span>
          <span>í”„ë¡œí•„</span>
        </button>
      </nav>
    </div>
  </div>

  <!-- ê·¸ë£¹ ìƒì„± ëª¨ë‹¬ -->
  <div id="createGroupModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>ìƒˆ ê·¸ë£¹ ë§Œë“¤ê¸°</h2>
        <button class="modal-close" onclick="closeModal('createGroupModal')">Ã—</button>
      </div>
      <div>
        <label class="muted" style="font-size:12px">ê·¸ë£¹ ì´ë¦„</label>
        <input type="text" id="newGroupName" placeholder="ì˜ˆ: ëŸ°í‹°í’€ ì¶˜ì²œ" maxlength="20" />
      </div>
      <div class="mt-2">
        <label class="muted" style="font-size:12px">ëŒ€íšŒ ì„ íƒ</label>
        <select id="newGroupEvent">
          <option value="">ëŒ€íšŒë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
          <option value="133">2025 JTBC ì„œìš¸ë§ˆë¼í†¤</option>
          <option value="132">2025 ì¶˜ì²œë§ˆë¼í†¤</option>
        </select>
      </div>
      <button id="confirmCreateGroupBtn" class="success mt-2">ê·¸ë£¹ ìƒì„±</button>
    </div>
  </div>

  <!-- ê·¸ë£¹ ì°¸ì—¬ ëª¨ë‹¬ -->
  <div id="joinGroupModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>ê·¸ë£¹ ì°¸ì—¬í•˜ê¸°</h2>
        <button class="modal-close" onclick="closeModal('joinGroupModal')">Ã—</button>
      </div>
      <div>
        <label class="muted" style="font-size:12px">ê·¸ë£¹ ì½”ë“œ (4ìë¦¬)</label>
        <input type="text" id="joinGroupCode" placeholder="ì˜ˆ: A1B2" maxlength="4" style="text-transform:uppercase" />
      </div>
      <button id="confirmJoinGroupBtn" class="success mt-2">ê·¸ë£¹ ì°¸ì—¬</button>
    </div>
  </div>

  <!-- ì£¼ì ì •ë³´ ë“±ë¡ ëª¨ë‹¬ -->
  <div id="registerRunnerModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>ì£¼ì ì •ë³´ ë“±ë¡</h2>
        <button class="modal-close" onclick="closeModal('registerRunnerModal')">Ã—</button>
      </div>
      <p id="registerRunnerDescription" class="muted" style="font-size:12px">ê·¸ë£¹ ì°¸ì—¬ë¥¼ ìœ„í•´ ë°°ë²ˆê³¼ ì‚¬ì§„ì„ ë“±ë¡í•´ì£¼ì„¸ìš”.</p>
      
      <div class="mt-2">
        <label class="muted" style="font-size:12px">ë°°ë²ˆ (Bib Number)</label>
        <input type="number" id="runnerBib" placeholder="ì˜ˆ: 12345" />
      </div>
      
      <div class="mt-2">
        <label class="muted" style="font-size:12px">ì£¼ì ì‚¬ì§„</label>
        <div class="image-upload-area" id="imageUploadArea" onclick="document.getElementById('runnerPhoto').click()">
          <div id="uploadPlaceholder">
            <div style="font-size:32px">ğŸ“·</div>
            <div style="margin-top:8px">í´ë¦­í•˜ì—¬ ì‚¬ì§„ ì—…ë¡œë“œ</div>
          </div>
          <img id="imagePreview" class="image-preview hidden" />
          <input type="file" id="runnerPhoto" accept="image/*" class="hidden" onchange="handleImageSelect(event)" />
        </div>
      </div>
      
      <button id="confirmRegisterRunnerBtn" class="success mt-2">ë“±ë¡ ì™„ë£Œ</button>
    </div>
  </div>

  <!-- ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ ëª¨ë‹¬ -->
  <div id="privacyModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</h2>
        <button class="modal-close" onclick="closeModal('privacyModal')">Ã—</button>
      </div>
      <div style="font-size:13px;line-height:1.8;color:var(--fg)">
        <h3>1. ìˆ˜ì§‘í•˜ëŠ” ê°œì¸ì •ë³´</h3>
        <p>RunCheerëŠ” ë‹¤ìŒì˜ ê°œì¸ì •ë³´ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤:</p>
        <ul>
          <li>ì¹´ì¹´ì˜¤í†¡ ê³„ì • ì •ë³´ (ë‹‰ë„¤ì„, í”„ë¡œí•„ ì´ë¯¸ì§€)</li>
          <li>ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì´ë¦„</li>
          <li>ë°°ë²ˆ (Bib Number)</li>
          <li>ì£¼ì ì‚¬ì§„</li>
          <li>ê·¸ë£¹ ì •ë³´</li>
        </ul>

        <h3>2. ê°œì¸ì •ë³´ì˜ ì´ìš© ëª©ì </h3>
        <ul>
          <li>ë§ˆë¼í†¤ ì‘ì› ì„œë¹„ìŠ¤ ì œê³µ</li>
          <li>ê·¸ë£¹ ê´€ë¦¬ ë° ì£¼ì ì¶”ì </li>
          <li>ì‚¬ìš©ì ì‹ë³„ ë° ì¸ì¦</li>
        </ul>

        <h3>3. ê°œì¸ì •ë³´ ë³´ìœ  ë° ì´ìš©ê¸°ê°„</h3>
        <p>ìˆ˜ì§‘ëœ ê°œì¸ì •ë³´ëŠ” <strong>ëŒ€íšŒ ì¢…ë£Œ í›„ 30ì¼ ì´ë‚´ì— ìë™ìœ¼ë¡œ íê¸°</strong>ë©ë‹ˆë‹¤.</p>

        <h3>4. ê°œì¸ì •ë³´ ì œ3ì ì œê³µ</h3>
        <p>íšŒì‚¬ëŠ” ì´ìš©ìì˜ ê°œì¸ì •ë³´ë¥¼ ì›ì¹™ì ìœ¼ë¡œ ì™¸ë¶€ì— ì œê³µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>

        <h3>5. ê°œì¸ì •ë³´ ì‚­ì œ</h3>
        <p>íšŒì› íƒˆí‡´ ì‹œ ëª¨ë“  ê°œì¸ì •ë³´ëŠ” ì¦‰ì‹œ ì‚­ì œë©ë‹ˆë‹¤.</p>

        <p class="muted" style="margin-top:20px">ìµœì¢… ìˆ˜ì •ì¼: 2025ë…„ 10ì›” 25ì¼</p>
      </div>
    </div>
  </div>

  <script src="/js/app.js"></script>
</body>
</html>
