<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>테스트 맵 - 좌표 확인</title>
  <style>
    body { margin: 0; padding: 0; font-family: sans-serif; }
    #map { width: 100%; height: 100vh; }
  </style>
  <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=04ebpnqto6"></script>
</head>
<body>
  <div id="map"></div>

  <script>
    const points = [
      { lat: 37.56529669813392, lng: 126.88333511352539, name: "P0" },
      { lat: 37.565236394284504, lng: 126.88936269295633, name: "P1" },
      { lat: 37.565338446005846, lng: 126.89378297341287, name: "P2" },
      { lat: 37.565270411540475, lng: 126.89996278298318, name: "P3" },
      { lat: 37.56547451475013, lng: 126.90609967720926, name: "P4" },
      { lat: 37.5633994393941, lng: 126.90674340737283, name: "P5" },
      { lat: 37.561970665385736, lng: 126.90369641793191, name: "P6" },
      { lat: 37.56139234430658, lng: 126.90150773537576, name: "P7" },
      { lat: 37.5609841149597, lng: 126.89764535439431, name: "P8" },
      { lat: 37.56101813415738, lng: 126.89339673531472, name: "P9" },
      { lat: 37.56322934868708, lng: 126.88725984108865, name: "P10" }
    ];

    // 지도 초기화
    const map = new naver.maps.Map('map', {
      center: new naver.maps.LatLng(37.564, 126.895),
      zoom: 14
    });

    // 폴리라인 경로 생성
    const path = points.map(p => new naver.maps.LatLng(p.lat, p.lng));
    
    // 빨간 선으로 경로 그리기
    const polyline = new naver.maps.Polyline({
      path: path,
      strokeColor: '#FF0000',
      strokeOpacity: 0.8,
      strokeWeight: 5,
      map: map
    });

    // 각 지점에 마커와 라벨 표시
    points.forEach((p, idx) => {
      const position = new naver.maps.LatLng(p.lat, p.lng);
      
      // 마커
      const marker = new naver.maps.Marker({
        position: position,
        map: map,
        icon: {
          content: `<div style="
            width: 24px;
            height: 24px;
            background: #4285f4;
            border: 3px solid white;
            border-radius: 50%;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 10px;
          ">${idx}</div>`,
          anchor: new naver.maps.Point(12, 12)
        }
      });

      // 라벨
      const label = new naver.maps.Marker({
        position: position,
        map: map,
        icon: {
          content: `<div style="
            background: rgba(66, 133, 244, 0.95);
            color: white;
            padding: 6px 12px;
            border-radius: 16px;
            font-weight: bold;
            font-size: 12px;
            white-space: nowrap;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            border: 2px solid white;
          ">${p.name}</div>`,
          anchor: new naver.maps.Point(0, 35)
        }
      });

      // 클릭 시 좌표 정보 표시
      const infoWindow = new naver.maps.InfoWindow({
        content: `<div style="padding:10px;min-width:200px;">
          <h3 style="margin:0 0 10px 0;">${p.name}</h3>
          <p style="margin:5px 0;font-size:12px;"><strong>위도:</strong> ${p.lat}</p>
          <p style="margin:5px 0;font-size:12px;"><strong>경도:</strong> ${p.lng}</p>
          <p style="margin:5px 0;font-size:12px;"><strong>순서:</strong> ${idx}</p>
        </div>`
      });

      naver.maps.Event.addListener(marker, 'click', () => {
        if (infoWindow.getMap()) {
          infoWindow.close();
        } else {
          infoWindow.open(map, marker);
        }
      });

      naver.maps.Event.addListener(label, 'click', () => {
        if (infoWindow.getMap()) {
          infoWindow.close();
        } else {
          infoWindow.open(map, marker);
        }
      });
    });

    // 지도 범위를 모든 마커가 보이도록 조정
    const bounds = new naver.maps.LatLngBounds();
    points.forEach(p => {
      bounds.extend(new naver.maps.LatLng(p.lat, p.lng));
    });
    map.fitBounds(bounds);

    console.log(`총 ${points.length}개 지점 표시됨`);
  </script>
</body>
</html>
